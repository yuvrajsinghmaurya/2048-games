(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();let r,f=0;const c=4,s=4;window.onload=function(){E()};function E(){f=0,document.getElementById("score").innerText=f,document.getElementById("gameOverModal").style.display="none",r=Array(c).fill().map(()=>Array(s).fill(0));const t=document.getElementById("board");t.innerHTML="";for(let e=0;e<c;e++)for(let n=0;n<s;n++){let l=document.createElement("div");l.id=e+"-"+n,d(l,0),t.appendChild(l)}p(),p()}function d(t,e){t.innerText=e>0?e:"",t.className="tile",e>0&&t.classList.add(e<=4096?"x"+e:"x8192")}document.addEventListener("keyup",t=>{let e=!1;switch(t.code){case"ArrowLeft":e=b();break;case"ArrowRight":e=I();break;case"ArrowUp":e=L();break;case"ArrowDown":e=O();break}e&&p(),document.getElementById("score").innerText=f,B()&&M()});function y(t){return t.filter(e=>e!==0)}function a(t){t=y(t);for(let e=0;e<t.length-1;e++)t[e]===t[e+1]&&(t[e]*=2,t[e+1]=0,f+=t[e]);for(t=y(t);t.length<s;)t.push(0);return t}function b(){let t=!1;for(let e=0;e<c;e++){const n=[...r[e]];r[e]=a(r[e]),t||=!u(n,r[e]),g(e)}return t}function I(){let t=!1;for(let e=0;e<c;e++){const n=[...r[e]];r[e].reverse(),r[e]=a(r[e]),r[e].reverse(),t||=!u(n,r[e]),g(e)}return t}function L(){let t=!1;for(let e=0;e<s;e++){let n=[r[0][e],r[1][e],r[2][e],r[3][e]];const l=[...n];n=a(n);for(let o=0;o<c;o++)r[o][e]=n[o];t||=!u(l,n),h(e)}return t}function O(){let t=!1;for(let e=0;e<s;e++){let n=[r[0][e],r[1][e],r[2][e],r[3][e]];const l=[...n];n.reverse(),n=a(n),n.reverse();for(let o=0;o<c;o++)r[o][e]=n[o];t||=!u(l,n),h(e)}return t}function g(t){for(let e=0;e<s;e++)d(document.getElementById(t+"-"+e),r[t][e])}function h(t){for(let e=0;e<c;e++)d(document.getElementById(e+"-"+t),r[e][t])}function p(){if(!v())return;let t=!1;for(;!t;){const e=Math.floor(Math.random()*c),n=Math.floor(Math.random()*s);r[e][n]===0&&(r[e][n]=2,d(document.getElementById(e+"-"+n),2),t=!0)}}function v(){return r.some(t=>t.includes(0))}function u(t,e){return t.every((n,l)=>n===e[l])}function B(){if(v())return!1;for(let t=0;t<c;t++)for(let e=0;e<s-1;e++)if(r[t][e]===r[t][e+1])return!1;for(let t=0;t<s;t++)for(let e=0;e<c-1;e++)if(r[e][t]===r[e+1][t])return!1;return!0}function M(){document.getElementById("finalScore").innerText=f,document.getElementById("gameOverModal").style.display="block"}
